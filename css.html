<style>
  /* ======= Variables y base ======= */
  :root{
    --blue:#1d4ed8;            /* Botones azules */
    --blue-600:#2563eb;
    --border:#e5e7eb;
    --bg:#f6f7fb;
    --text:#111827;
  }
  body{ font-family: Inter, system-ui, Arial; background:var(--bg); color:var(--text); }
  .container{ max-width:1100px; margin:24px auto; padding:0 16px; }
  .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }

  /* ======= Tarjetas / tipografía ======= */
  .card{ background:#fff; border-radius:14px; padding:16px; margin:12px 0; box-shadow:0 1px 4px rgba(0,0,0,.08); }
  .card h2{ margin:0 0 8px; font-size:20px; }
  .hint{ margin-top:8px; font-size:13px; color:#374151; }

  /* ======= Grids flex genéricos preexistentes ======= */
  .row{ display:flex; flex-wrap:wrap; gap:12px; }
  .row.g{ gap:10px; align-items:center; }
  .g > *{ flex:1 1 240px; min-width:220px; }

  .user-form-grid{
    display:grid;
    grid-template-columns:repeat(12, minmax(0,1fr));
    gap:12px 16px;
    align-items:flex-start;
  }
  .user-field{
    display:flex;
    flex-direction:column;
    gap:6px;
    grid-column:span 6;
    min-width:0;
  }
  .user-field label{ font-size:13px; color:#4b5563; font-weight:500; }
  .user-field--full{ grid-column:1 / -1; }
  @media (min-width: 1180px){
    .user-field{ grid-column:span 4; }
  }
  @media (max-width: 1024px){
    .user-field{ grid-column:span 12; }
    .modal-card--lg{ width:100%; }
  }
  .chip-list{ display:flex; flex-wrap:wrap; gap:6px; padding:6px 0; min-height:38px; align-items:center; }
  .chip-list[data-empty="true"]::before{ content:attr(data-empty-text); color:#6b7280; font-size:12px; }
  .chip{ display:inline-flex; align-items:center; gap:6px; padding:6px 10px; background:#eef2ff; border:1px solid #c7d2fe; border-radius:999px; font-size:13px; color:#1e40af; }
  .chip-remove{ background:none; border:none; color:#1f2937; cursor:pointer; font-size:14px; line-height:1; padding:0; }
  .chip-remove:hover{ color:#dc2626; }
  .chip-actions{
    display:grid;
    grid-template-columns:minmax(0,1fr) auto;
    gap:8px;
    align-items:center;
    margin-top:4px;
  }
  .chip-actions select{ min-width:0; }
  .chip-actions .btn{ min-width:128px; }

  .user-priority-block{
    margin-top:8px;
    padding:14px 16px;
    border:1px solid var(--border);
    border-radius:14px;
    background:#f9fafb;
    display:flex;
    flex-direction:column;
    gap:10px;
  }
  .user-priority-title-row{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
  }
  .user-priority-title{ font-size:14px; font-weight:600; color:#1f2937; }
  .user-priority-optional{ font-size:12px; color:#6b7280; font-weight:500; }
  .user-priority-controls{ display:flex; flex-direction:column; gap:6px; }
  .user-priority-controls label{ font-size:12px; color:#4b5563; }
  .user-priority-block .chip-actions{ margin-top:0; }
  .user-priority-block .chip-actions .btn{ justify-self:end; }
  @media (max-width: 720px){
    .user-priority-block{ padding:12px; }
  }
  @media (max-width: 640px){
    .chip-actions{ grid-template-columns:minmax(0,1fr) auto; }
  }
  @media (max-width: 560px){
    .chip-actions{ grid-template-columns:1fr; }
    .chip-actions .btn{ width:100%; justify-self:stretch; }
  }

  .filters-row{ display:flex; flex-wrap:wrap; gap:10px; }
  .filters-row .filter-box{ flex:1 1 220px; min-width:190px; display:flex; flex-direction:column; }
  .filters-row .filter-box label{ font-size:12px; color:#4b5563; margin:0 0 6px; font-weight:500; }
  .filters-row .filter-box input,
  .filters-row .filter-box select{ flex:1 1 auto; height:42px; }
  .filters-row.filters-row--end{ align-items:flex-end; }
  .filter-actions{ display:flex; gap:8px; align-items:flex-end; flex:0 0 auto; }

  /* ======= Inputs / selects uniformes ======= */
  input, select{
    width:100%;
    height:44px;                 /* altura uniforme */
    line-height:44px;
    padding:0 12px;
    border:1px solid var(--border);
    border-radius:10px;
    background:#fff;
    font-size:14px;
    box-sizing:border-box;
  }
  select:disabled, option:disabled { color:#9ca3af !important; }
  /* Alinea ícono del date y evita “desfase” */
  input[type="date"]{ padding-right:8px; }
  input[type="date"]::-webkit-calendar-picker-indicator{ margin:0 2px 0 0; }

  /* ======= Botones ======= */
  .btn{ display:inline-flex; align-items:center; justify-content:center; border:none; cursor:pointer; border-radius:10px; padding:8px 14px; line-height:1.2; }
  .btn-blue{ background:var(--blue); border:none; color:#fff; padding:10px 14px; border-radius:10px; cursor:pointer; }
  .btn-blue:hover{ background:var(--blue-600); }
  .btn--sm{ padding:6px 10px; border-radius:8px; font-size:13px; }
  .btn--sm{ height:36px; font-size:14px; padding:6px 12px; border-radius:8px; }
  .btn--md{ height:40px; font-size:15px; }
  .btn--full{ width:100%; }
  .btn-red { background: #dc2626; color: #fff; }
  .btn-red:hover { background: #b91c1c; }
  .btn-green{ background:#059669; color:#fff; }
  .btn-green:hover{ background:#047857; }
  .btn-toggle{ border-radius:999px; padding:6px 12px; height:34px; font-size:14px; }
  .btn-toggle[aria-pressed="true"]{ box-shadow:0 0 0 2px rgba(0,0,0,.05) inset; filter:saturate(1.1); }
  .actions{ margin-top:14px; }

  /* ======= Tablas ======= */
  tr.selected { background:#f3f4f6; }
  table{ width:100%; border-collapse:collapse; }
  th,td{ padding:10px; border-bottom:1px solid #eee; font-size:14px; }
  .tag{ display:inline-block; padding:2px 8px; border-radius:999px; font-size:12px; background:#eef2ff; color:#1e40af; }

  /* ======= Overlay & modal ======= */
  .overlay{ position:fixed; inset:0; background:rgba(0,0,0,.35); display:flex; flex-direction:column; align-items:center; justify-content:center; gap:10px; z-index:9999; padding:20px; box-sizing:border-box; overflow:auto; }
  .overlay[hidden]{ display:none !important; }
  .spinner{ width:48px; height:48px; border:4px solid #fff; border-top-color:transparent; border-radius:50%; animation:spin 1s linear infinite; }
  @keyframes spin{ to{ transform:rotate(360deg);} }
  .modal-card{ background:#fff; color:#111; padding:18px; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,.25); max-width:460px; width:min(100%, 460px); text-align:center; box-sizing:border-box; max-height:calc(100vh - 40px); overflow:auto; display:flex; flex-direction:column; gap:0; }
  .modal-card--md{ max-width:720px; width:min(100%, 720px); text-align:left; }
  .modal-card--lg{ max-width:920px; width:min(100%, 920px); text-align:left; }
  .modal-head{ margin-bottom:10px; }
  .modal-body{ display:flex; flex-direction:column; gap:14px; overflow:auto; flex:1 1 auto; }
  .modal-footer{ margin-top:16px; display:flex; flex-wrap:wrap; gap:10px; justify-content:flex-end; }
  .modal-scroll{ border:1px solid var(--border); border-radius:12px; max-height:min(48vh, 360px); overflow:auto; background:#fff; margin:0 0 12px; -webkit-overflow-scrolling:touch; }
  .required{ color:#dc2626; font-weight:600; }
  .table-overflow{ position:relative; border:1px solid var(--border); border-radius:12px; background:#fff; overflow:auto; -webkit-overflow-scrolling:touch; }
  .table-overflow table{ width:100%; min-width:720px; border-collapse:collapse; }
  .table-overflow table thead th{ background:#f9fafb; }
  .table-overflow.is-empty{ display:flex; align-items:center; justify-content:center; color:#6b7280; font-size:14px; padding:24px; text-align:center; }
  .table-overflow.is-empty::before{ content:attr(data-empty-text); }
  .table-overflow--flat{ max-height:min(52vh, 380px); }
  .table-overflow--flat table{ min-width:720px; }
  .user-list{ max-height:clamp(260px, 55vh, 320px); overflow-y:auto; scroll-behavior:smooth; flex:0 0 auto; }
  .user-list.is-empty{ max-height:none; overflow:hidden; }
  .user-list::-webkit-scrollbar{ width:8px; }
  .user-list::-webkit-scrollbar-thumb{ background:#d1d5db; border-radius:999px; }
  .user-list::-webkit-scrollbar-thumb:hover{ background:#9ca3af; }
  .user-card-list{ display:none; }
  .user-card{
    display:flex;
    flex-direction:column;
    gap:6px;
    padding:12px 14px;
    border:1px solid var(--border);
    border-radius:12px;
    background:#fff;
    box-shadow:0 1px 2px rgba(15,23,42,.05);
    transition:border-color .2s ease, box-shadow .2s ease;
  }
  .user-card__name{ margin:0; font-size:15px; font-weight:600; color:#111827; }
  .user-card__email{ font-size:12px; color:#4b5563; word-break:break-word; }
  .user-card__pills{ display:flex; flex-wrap:wrap; gap:6px; }
  .user-card.selected{ border-color:var(--blue); box-shadow:0 0 0 1px rgba(29,78,216,.35); }
  .user-card .pill{ font-size:11px; font-weight:600; letter-spacing:.02em; text-transform:uppercase; }
  .pill--role{ background:#eff6ff; border-color:#bfdbfe; color:#1d4ed8; }
  .pill--priority{ background:#ede9fe; border-color:#ddd6fe; color:#5b21b6; }
  .pill--estado-activo{ background:#ecfdf5; border-color:#bbf7d0; color:#047857; }
  .pill--estado-pendiente{ background:#fef3c7; border-color:#fde68a; color:#92400e; }
  .pill--estado-inactivo{ background:#fee2e2; border-color:#fecaca; color:#b91c1c; }
  .pill--estado-default{ background:#f3f4f6; border-color:#e5e7eb; color:#374151; }
  .pill--dept{ background:#f3f4f6; border-color:#e5e7eb; color:#374151; text-transform:none; font-weight:500; }
  .table-overflow--salones{ padding-bottom:8px; }
  .table-overflow--salones table{ min-width:780px; }
  @media (max-width: 720px){
    .table-overflow--salones{ margin:0 -8px; border-left:none; border-right:none; border-radius:0; }
    .table-overflow--salones table{ min-width:680px; }
  }

  @media (max-width: 720px){
    .overlay{ align-items:stretch; padding:14px 10px; }
    .modal-card{ max-height:none; width:100%; text-align:left; }
    .modal-card--lg{ min-height:calc(100vh - 20px); }
    .modal-body{ overflow:visible; }
    .table-overflow--flat{ max-height:none; }
  }

  @media (max-width: 640px){
    .table-overflow--flat{ padding:12px; border:1px solid var(--border); border-radius:14px; }
    .table-overflow--flat table{ display:none; }
    .user-card-list{ display:flex; flex-direction:column; gap:12px; }
  }

  @media (max-width: 640px){
    .user-priority-block{ padding:14px; border-radius:12px; }
    .user-priority-title-row{ flex-direction:column; align-items:flex-start; gap:4px; }
    .user-priority-title{ font-size:15px; }
    .user-priority-optional{ font-size:12px; }
    .user-priority-block .chip-list{ flex-direction:column; align-items:stretch; gap:8px; }
    .chip-list[data-empty="true"]::before{ display:block; }
  }
  .user-table tbody tr:hover{ background:#f9fafb; }
  .user-table td[data-th], .user-table th{ text-align:left; }
  .user-table td:nth-child(4),
  .user-table td:nth-child(6),
  .user-table td:nth-child(7),
  .user-table td:nth-child(8),
  .user-table th:nth-child(4),
  .user-table th:nth-child(6),
  .user-table th:nth-child(7),
  .user-table th:nth-child(8){ text-align:center; }

  /* Live region (accesibilidad) */
  .overlay .overlay-msg{ outline:0; }

  /* ======= Layout específico del formulario público ======= */
  /* Grid de 12 columnas para alinear Fecha/Duración/Hora perfectamente */
  .form-grid{
    display:grid;
    grid-template-columns:repeat(12, 1fr);
    gap:12px 14px;               /* fila, columna */
  }
  .form-item{ grid-column:span 3; }          /* 4 campos por fila en desktop */
  .form-item--full{ grid-column:1 / -1; }    /* ancho completo */

  /* Etiquetas y ayuda */
  .form-item label{
    display:flex;               /* mantiene el meta en línea */
    align-items:center;
    gap:6px;
    font-size:13px;
    color:#4b5563;
    margin:0 0 6px;
  }
  .label-actions{ display:flex; align-items:center; gap:8px; }
  /* Meta del label: (máx N) compacto e inline */
  .form-item label .label-meta{
    font-size:12px;
    font-weight:500;
    color:#6b7280;
    white-space:nowrap;         /* evita salto de línea que desalineaba */
  }
  .host-input-group{ position:relative; display:flex; flex-direction:column; gap:6px; }
  .host-suggestions{
    position:absolute;
    top:100%;
    left:0;
    right:0;
    margin-top:4px;
    background:#fff;
    border:1px solid var(--border);
    border-radius:12px;
    box-shadow:0 12px 28px rgba(15,23,42,.12);
    max-height:260px;
    overflow:auto;
    z-index:30;
    padding:4px 0;
  }
  .host-suggestions[hidden]{ display:none !important; }
  .host-suggestion{ display:flex; flex-direction:column; align-items:flex-start; gap:2px; padding:10px 14px; width:100%; border:none; background:none; text-align:left; cursor:pointer; font-size:13px; color:#111827; }
  .host-suggestion:hover,
  .host-suggestion:focus{ background:#eef2ff; outline:none; }
  .host-suggestion__name{ font-weight:600; font-size:14px; }
  .host-suggestion__email{ font-size:12px; color:#4b5563; }
  .host-suggestion__dept{ font-size:12px; color:#6b7280; }
  .host-suggestions__empty{ padding:10px 14px; font-size:13px; color:#6b7280; }
  .host-suggestions__loading{
    display:flex;
    align-items:center;
    gap:10px;
    padding:10px 14px;
    font-size:13px;
    color:#4b5563;
  }
  .host-suggestions__loading i{ font-size:16px; }

  /* Label con texto a la izquierda y nota (máx X) a la derecha, en una sola línea */
  .label-row{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
  }
  .label-row .muted{
    margin:0;
    font-size:12px;
    white-space:nowrap; /* evita salto de línea de "(máx X)" */
  }

  .muted{ display:block; margin-top:6px; font-size:12px; color:#6b7280; }

  .notice{ margin-top:6px; font-size:13px; padding:10px 12px; border-radius:10px; border:1px solid transparent; background:#f3f4f6; color:#1f2937; }
  .notice--warning{ background:#fef3c7; border-color:#fcd34d; color:#92400e; }
  .notice--info{ background:#dbeafe; border-color:#93c5fd; color:#1e3a8a; }
  .notice[hidden]{ display:none !important; }

  /* Secciones visibles dentro de la tarjeta */
  .section{ padding:10px 0 2px; border-top:1px dashed var(--border); margin-top:10px; }
  .section:first-of-type{ border-top:none; margin-top:0; }
  .section-title{ font-weight:600; font-size:14px; color:#374151; margin:0 0 10px; }
  .card .section + .section{ margin-top:18px; padding-top:18px; }

  .actions .btn-blue{ display:block; width:100%; height:44px; font-weight:600; border-radius:12px; }
  /* Desktop: botón normal y centrado */
  @media (min-width: 821px){
    .actions .btn-blue{ width:auto; min-width:220px; height:40px; margin-inline:auto; }
  }

  /* Hover consistente con la paleta */
  .actions .btn-blue:hover{
    background: var(--blue-600);
  }

  /* Centrar tabla de "Mis reservas" sin afectar otras tablas */
  .table-center th,
  .table-center td{ text-align:center; }

  /* ======= Error Style ======= */
  .error{ color:#dc2626; font-size:12px; margin-top:4px; display:block; }
  input.input-error{ border-color:#fca5a5 !important; outline-color:#fca5a5 !important; }

  /* ======= Pill ======= */

  .pill{
    display:inline-block;
    padding:2px 10px;
    border-radius:999px;
    font-size:12px;
    background:#eef2ff;
    color:#1e40af;
    border:1px solid #e5e7eb;
  }

  /* Encabezado de sección con acción a la derecha */
  .section-head{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin:0 0 10px; }
  .section-head .actions-inline{ display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
  
  /* Línea de pregunta + botones juntos (no a la derecha) */
  .qline{
    display:flex;
    align-items:center;
    gap:10px;
    flex-wrap:wrap;
  }
  .qline .section-title{ margin:0; }
  .btn-green{ background:#059669; color:#fff; }
  .btn-green:hover{ background:#047857; }
  .btn-toggle{ border-radius:999px; padding:6px 12px; height:34px; font-size:14px; }
  .btn-toggle[aria-pressed="true"]{ box-shadow:0 0 0 2px rgba(0,0,0,.05) inset; filter:saturate(1.1); }

  /* Botón solo-ícono, compacto */
  .icon-btn{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    width:36px;
    height:36px;
    border:none;
    border-radius:999px;
    background:var(--blue);
    color:#fff;
    cursor:pointer;
    box-shadow:0 1px 3px rgba(0,0,0,.1);
    transition:background .18s ease, box-shadow .18s ease;
    font-size:16px;
    line-height:1;
  }
  .icon-btn:hover{
    background:var(--blue-600);
    box-shadow:0 3px 8px rgba(0,0,0,.18);
  }
  .icon-btn i{ pointer-events:none; }
  .label-row .icon-btn{ width:34px; height:34px; font-size:15px; }

  /* ===== Responsive table -> cards (Mis reservas) ===== */
  .resp-table{ width:100%; border-collapse:collapse; }
  .resp-table thead th, .resp-table tbody td{ text-align:center; }  /* sigue centrado en desktop */

  /* Estado como “pill” (modificadores) */
  .pill--ok{  background:#ecfdf5; color:#065f46; border-color:#d1fae5; }   /* verde suave */
  .pill--bad{ background:#fef2f2; color:#991b1b; border-color:#fee2e2; }   /* rojo suave */
  .pill--other{ background:#eef2ff; color:#1e40af; border-color:#e5e7eb; } /* azul suave */
  .pill--pending{ background:#fef3c7; color:#92400e; border-color:#fde68a; }

  .cell-main{ display:block; font-weight:600; color:#111827; }
  .cell-meta{ display:flex; flex-wrap:wrap; gap:6px; margin-top:4px; font-size:12px; color:#4b5563; }
  .cell-meta span{ display:flex; align-items:center; }
  .cell-meta .cell-sep{ color:#9ca3af; font-weight:600; }
  .cell-note{ display:block; margin-top:4px; font-size:12px; color:#4b5563; }

  .cancel-page{ min-height:100vh; display:flex; flex-direction:column; }
  .cancel-layout{ width:100%; max-width:620px; margin:24px auto; padding:0 16px; display:flex; flex-direction:column; gap:18px; flex:1 1 auto; }
  .cancel-card{ text-align:left; }
  .cancel-card--header{ display:flex; flex-direction:column; align-items:center; gap:12px; text-align:center; }
  .cancel-card--header img{ height:56px; width:auto; }
  .cancel-summary{ border:1px solid var(--border); border-radius:12px; background:#f9fafb; padding:14px 16px; display:flex; flex-direction:column; gap:10px; margin-top:12px; }
  .cancel-summary__row{ display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap; }
  .cancel-summary__label{ font-weight:600; color:#1f2937; }
  .cancel-summary__value{ color:#374151; }
  .cancel-textarea{ width:100%; min-height:110px; border:1px solid var(--border); border-radius:10px; padding:12px; font-family:inherit; font-size:14px; resize:vertical; box-sizing:border-box; margin-top:8px; }
  .cancel-actions{ display:flex; justify-content:center; margin-top:16px; }
  .site-footer{
    margin:24px 0 12px;
    padding:16px 0;
    border-top:1px solid var(--border);
    font-size:13px;
    color:#4b5563;
  }
  .site-footer__credits{
    display:flex;
    align-items:center;
    gap:12px;
    width:100%;
    max-width:1100px;
    margin:0 auto;
    padding:0 16px;
    color:#4b5563;
  }
  .site-footer__credits-text{ flex:1 1 auto; text-align:center; }
  .site-footer__signature{ margin-left:auto; max-width:100%; height:auto; }
  @media (max-width: 520px){
    .site-footer{ padding:14px 0; }
    .site-footer__credits{ flex-direction:column; align-items:flex-start; gap:10px; }
    .site-footer__credits-text{ text-align:center; width:100%; }
    .site-footer__signature{ margin-left:0; align-self:flex-end; }
  }
  
  /* ======= Responsive ======= */
  @media (max-width: 1024px){
    .form-item{ grid-column: span 4; }      /* 3 por fila */
  }
  @media (max-width: 820px){
    .g > *{ flex:1 1 100% !important; min-width:0 !important; max-width:100% !important; }
    input, select, .btn-blue{ width:100% !important; }
    .icon-btn{ width:40px; height:40px; }
    .form-item{ grid-column:1 / -1; }       /* 1 por fila */
    .form-grid{ gap:10px 10px; }

    /* Botón “Reservar” pegado abajo y siempre visible en móvil */
    .actions{ position:sticky; bottom:8px; background:#fff; padding-top:6px; z-index:5; }

    .cards-area{
      /* cubre el fondo blanco de la .card contenedora */
      margin-left:-16px;    /* igual al padding de .card */
      margin-right:-16px;
      background:var(--bg); /* mismo fondo que la página */
      padding:4px 16px;     /* repone el padding visual */
      border-radius:12px;   /* redondeo suave en los bordes visibles */
    }
    
    /* Oculta encabezados y convierte filas en tarjetas */
    .resp-table thead{ display:none; }
    .resp-table, .resp-table tbody, .resp-table tr{ display:block; width:100%; }

    /* “Sangría negativa” para que las tarjetas se peguen a los bordes del contenedor */
    /* Usa el mismo padding que tu .card (16px por defecto) */
    .resp-table{ 
      margin-left: -16px;
      margin-right: -16px;
    }

    /* Tarjeta */
    .resp-table tr{
      background:#fff;
      border:1px solid var(--border);
      border-radius:14px;
      padding:12px 14px;
      margin:12px 0;
      box-shadow:0 1px 6px rgba(0,0,0,.06);
    }

    /* Fila (par etiqueta / valor) */
    .resp-table td{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      padding:6px 0;
      border-bottom:none;
      text-align:right;   /* valor a la derecha */
    }

    /* Etiqueta (viene de data-th) */
    .resp-table td::before{
      content: attr(data-th);
      font-weight:600;
      color:#374151;
      text-align:left;
      opacity:.85;
    }

    /* Valor más protagónico */
    .resp-table td .val{
      font-weight:600;
      color:#111827;
      line-height:1.35;
    }

    /* Ajustes por tipo de dato */
    .resp-table td[data-th="Hora"] .val{ white-space:nowrap; }     /* evita saltos raros */
    .resp-table td[data-th="Evento"]{
      text-align:left; 
    }
    .resp-table td[data-th="Evento"] .val{
      font-weight:500; 
      color:#1f2937;
    }

    .resp-table td + td { border-top:1px dashed #eee; }
  }
  @media (max-width: 600px){
    .cancel-layout{ margin:16px auto; padding:0 12px; }
    .cancel-summary__row{ flex-direction:column; align-items:flex-start; gap:4px; }
    .cancel-actions{ justify-content:stretch; }
    .cancel-actions .btn-blue{ width:100%; }
  }
</style>
